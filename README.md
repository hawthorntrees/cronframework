# hawthorn

#### 介绍
是一个基于 Go 语言开发的高可用分布式定时任务框架，支持主备数据库部署、动态任务调度、国密加密、优雅启停等核心特性，适用于微服务架构下的定时任务统一管理场景。

#### 软件架构
##### 分布式能力
- 基于 PostgreSQL 实现分布式锁，避免任务重复执行
- 主备数据库自动切换，提升数据层可用性
##### 任务调度
- 支持秒级 Cron 表达式（基于 robfig/cron/v3 扩展）
- 动态任务同步：定时从数据库拉取任务配置，无需重启服务
- 任务抢占机制：确保同一任务同一时间仅在一个节点执行
- 失败重试：支持自定义重试次数与指数退避策略
##### 安全特性
- 国密 SM4 加密数据库密码，敏感信息不泄露
- 任务执行超时控制，避免僵尸任务占用资源
- 软删除机制，任务历史可追溯
##### 可观测性
- 完善的日志体系（基于 Zap + Lumberjack 日志轮转）
- 任务执行轨迹追踪（雪花算法生成全局唯一 TraceID）
- 执行记录持久化（按日期分区存储，自动清理历史数据）
- HTTP 健康检查与监控接口
##### 工程化支持
- 优雅启停：支持 SIGINT/SIGTERM 信号，安全释放资源
- 配置热加载：通过定时同步机制更新任务配置
- 丰富的工具链：密码加密工具、SQL 初始化脚本
#### 安装教程
1. 环境准备
- Go 1.21+
- PostgreSQL 12+（支持分区表与 pg_cron 扩展）
- 依赖管理：Go Modules
2. 安装框架
# 克隆仓库
go get -u github.com/hawthorntrees/cronframework
# 安装依赖
go mod download

# 构建密码加密工具
go build -o bin/encrypt-tool ./cmd/encrypt-tool


#### 使用说明

1.  xxxx
2.  xxxx
3.  xxxx

#### 参与贡献




#### 特技
